digraph G {
        FW_UPLOAD [shape=box; label="Firmware upload/update\n(black box TBD)"];

        BOOTED -> IDENTIFIED [label="svc_hotplug_attrs"];
        IDENTIFIED -> HOTPLUGGED [label="svc_notify_hotplug"];
        HOTPLUGGED -> MADE_MANIFEST [label="ap_control_conn"];

        MADE_MANIFEST -> FW_UPLOAD [label="iface_fw_up"];
        FW_UPLOAD -> DEAD_DUMMY [label="fw_fatal_err"];
        FW_UPLOAD -> LINK_UP [label="fw_done"];

        MADE_MANIFEST -> ENUMERATING [label="iface_has_fw"];
        ENUMERATING -> ENUMERATING [label="ap_bind_bundle"];
        ENUMERATING -> DEAD_DUMMY [label="enum_fatal_err"];

        ENUMERATING -> ENUMERATED [label="ap_enum_done"];
}
